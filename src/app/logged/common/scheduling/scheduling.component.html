<div class="main">
    <div class="hold-scheduling">

        <app-logged-header title="AGENDAR"></app-logged-header>

        <form [formGroup]="form">
            <mat-calendar [(selected)]="selected" [minDate]="minDate" class="calendar" (click)="getData()">
            </mat-calendar>

            <div>
                <fieldset>
                    <legend>HORÁRIOS DISPONÍVEIS</legend>
                    <div *ngIf="schedules.length <= 0" class="empty">
                        <span *ngIf="errors.size <= 0">ESCOLHA UM DIA</span>
                        <span *ngIf="errors.size > 0" class="error">{{errors.get(CONSTANTS.Errors.ERROR)}}</span>
                    </div>
                    <div *ngFor="let schedule of schedules">
                        <div class="selectable-schedule" [id]="schedule.dayTimeId">
                            <label [for]="schedule.dayTimeStart">{{schedule.dayTimePretty}}</label>
                            <input type="radio" [id]="schedule.dayTimeStart" name="schedule" formControlName="schedule"
                                [value]="schedule.dayTimeStart" (change)="selectDiv(schedule.dayTimeId)">
                        </div>
                    </div>
                </fieldset>
            </div>


            <div>
                <fieldset>
                    <legend>SERVIÇOS</legend>
                    <div *ngIf="services.length <= 0" class="empty">
                        <span *ngIf="schedules.length <= 0 && errors.size <= 0">ESCOLHA UM DIA</span>
                        <span *ngIf="errors.size <= 0 && schedules.length > 0">NÃO HÁ SERVIÇOS CADASTRADOS</span>
                        <span *ngIf="errors.size > 0" class="error">{{errors.get(CONSTANTS.Errors.ERROR)}}</span>
                    </div>
                    <div *ngFor="let service of services">
                        <div class="selectable-service" [id]="service.serviceId">
                            <label [for]="service.serviceDescription">{{service.serviceDescription}}</label>
                            <input type="radio" [id]="service.serviceDescription" name="service"
                                [value]="service.serviceDescription" formControlName="service"
                                (change)="selectService(service.serviceId)">
                        </div>
                    </div>
                </fieldset>
            </div>

            <div *ngIf="userInfo?.get(CONSTANTS.Keys.ROLE) === CONSTANTS.Roles.ADMIN">
                <fieldset>
                    <legend>TELEFONE DO USUÁRIO</legend>
                    <div>
                        <input type="tel" name="phone" id="phone" formControlName="userPhone" placeholder="Telefone" title="Telefone - (35) 9 9898-9898" mask="(00) 0 0000-0000" [dropSpecialCharacters]="false">

                    </div>
                </fieldset>
            </div>

            <div class="hold-button">
                <button class="final-action-button" (click)="createOrder()">AGENDAR</button>
            </div>

        </form>
    </div>
</div>